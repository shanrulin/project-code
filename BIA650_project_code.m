C =[0.013222214	0.011001071	0.001636944	0.015773545	0.001238295	0.006951002	0.012021722	0.012650406	0.012164105	0.009477054	0.007810909	0.026490741	0.011205663	0.021533979	0.016278385;
    0.011001071	0.010965908	-0.001083553 0.009704128 0.006386819 0.009343043 0.014383916 0.009032935 0.01032047	0.009568722	0.003966455	0.018201244	0.006263059	0.018957189	0.012839607;
    0.001636944	-0.001083553 0.016918542 0.011444548 0.014130273 -0.002945895 -0.002683969 0.005500026 0.005987255 0.008663194 0.013329088 0.001958342 -0.023718059	-5.56383E-05 0.001573685;
    0.015773545	0.009704128	0.011444548	0.04039883	0.006002987	-0.001502464 -0.007332915 0.013686537 0.00539507 0.008760445 0.02106944	0.056218256	0.024989736	0.046759999	0.024951825;
    0.001238295	0.006386819	0.014130273	0.006002987	0.053035555	0.010959018	0.00954519	-0.002737864 0.003814206 0.019775839 0.009314689 -0.008910621 -0.045652676 0.015191067 -0.00031528;
    0.006951002	0.009343043	-0.002945895 -0.001502464 0.010959018 0.011604763 0.01867084 0.005129879 0.00983663	0.009764549	-0.0011614 0.00081903 -0.006533601 0.007207202 0.005857874;
    0.012021722	0.014383916	-0.002683969 -0.007332915 0.00954519 0.01867084	0.036506274	0.013313959	0.023161055	0.017018955	-0.001771897 -0.006784745 -0.018319346 -0.002794138	0.007966721;
    0.012650406	0.009032935	0.005500026	0.013686537	-0.002737864 0.005129879 0.013313959 0.015417937 0.016007889 0.010153233 0.009468052 0.020307454 0.002987351 0.010899256 0.014220592;
    0.012164105	0.01032047	0.005987255	0.00539507	0.003814206	0.00983663	0.023161055	0.016007889	0.021096964	0.014647597	0.007158175	0.006179431	-0.013292954 0.001033373 0.01071449;
    0.009477054	0.009568722	0.008663194	0.008760445	0.019775839	0.009764549	0.017018955	0.010153233	0.014647597	0.016095637	0.008941862	0.006379368	-0.019679415 0.010304419 0.008971895;
    0.007810909	0.003966455	0.013329088	0.02106944	0.009314689	-0.0011614 -0.001771897	0.009468052	0.007158175	0.008941862	0.01515341 0.022177181 -0.004006216	0.01693998 0.010984459;
    0.026490741	0.018201244	0.001958342	0.056218256	-0.008910621 0.00081903	-0.006784745 0.020307454 0.006179431 0.006379368 0.022177181 0.093520279 0.067446205 0.076322413 0.041739321;
    0.011205663	0.006263059	-0.023718059 0.024989736 -0.045652676 -0.006533601 -0.018319346	0.002987351	-0.013292954 -0.019679415 -0.004006216 0.067446205 0.098688979 0.048373599 0.023827593;
    0.021533979	0.018957189	-5.56383E-05 0.046759999 0.015191067 0.007207202 -0.002794138 0.010899256 0.001033373 0.010304419 0.01693998 0.076322413 0.048373599 0.077188744 0.034535001;
    0.016278385	0.012839607	0.001573685	0.024951825	-0.00031528	0.005857874	0.007966721	0.014220592	0.01071449	0.008971895	0.010984459	0.041739321	0.023827593	0.034535001	0.022119721];
%[rows, clos]=size(C);
NewC=(C+3.1286e-05*eye(15,15)+0.1);% min(eig(NewC)) is positive
%new = NewC/NewC(1,1);% renormalize it, but doesn't change the result
M=[0.128560923; 0.327040646; 0.126381954; 0.08428881; 0.14803136;
   0.006214505; 0.048697962; 0.048659941; 0.041867189; -0.068666772;
   0.275851393; 0.237292531; 0.285457277; 0.219125213; 0.094620223];
r = [0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027;0.027];
A =[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];  
b =1;
% C: covariance matrix, M= expected return, r= risk free return
%[V,D] = eig(C)
%eig(C)
cvx_begin
  variable y(15) 
  variable k 
   minimize(y'*NewC*y)
   subject to
        (M-r)'*y == 1;
        A*y == b*k;% (1)sum of all weight =1
        %A(1:5)*y(1:5) == b*k;(2)health only
        A(6:10)*y(6:10) == b*k; %(3)energy company only
        %A(11:15)*y(11:15) == b*k;%(4)tech company only
        %A(1:5)*y(1:5) >= 0.1*b*k; %(5)health at least 0.1
        %A(6:10)*y(6:10) >= 0.1*b*k; %(5)energy at least 0.1
        %A(11:15)*y(11:15) >= 0.1*b*k;%(5) tech company at least 0.1
        %A(1:5)*y(1:5) ==b*k/3; %(6) 1/3 in health
        %A(6:10)*y(6:10) == b*k/3; %(6) 1/3 in energy
        %A(11:15)*y(11:15) == b*k/3;%(6) 1/3 in tech company 
        y >= 0;
        k >= 0;
cvx_end
X = y./k;
